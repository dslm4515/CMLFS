cd libunwind  

cmake -B build -G Ninja \
      -DCMAKE_INSTALL_PREFIX="/cgnutools" \
      -DCMAKE_C_COMPILER="${CMLFS_TARGET}-gcc" \
      -DCMAKE_CXX_COMPILER="${CMLFS_TARGET}-g++" \
      -DLIBUNWIND_ENABLE_SHARED=ON \
      -DCMAKE_C_FLAGS="-fPIC"  \
      -DCMAKE_CXX_FLAGS="-fPIC"  

ninja -C build         && \
ninja -C build install && \

# Link libunwind to final toolchain. Libraries will be replaced once
# libunwind is rebuilt with clang
mkdir -pv /llvmtools/{lib,include}
ln -sv /cgnutools/lib/libunwind* /llvmtools/lib/ &&\

rm -rf build
